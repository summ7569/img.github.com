<!DOCTYPE HTML>
<HTML lang="kr">
<head>
    <meta charset="utf-8">
    <title>tes4</title>
        <style>
#mapwrap{position:relative;overflow:hidden;}
.category, .category *{margin:0;padding:0;color:#000;}   
.category {position:absolute;overflow:hidden;top:10px;left:10px;width:150px;height:50px;z-index:10;border:1px solid black;font-family:'Malgun Gothic','맑은 고딕',sans-serif;font-size:12px;text-align:center;background-color:#fff;}
.category .menu_selected {background:#FF5F4A;color:#fff;border-left:1px solid #915B2F;border-right:1px solid #915B2F;margin:0 -1px;} 
.category li{list-style:none;float:left;width:50px;height:45px;padding-top:5px;cursor:pointer;} 
.category .ico_comm {display:block;margin:0 auto 2px;width:22px;height:26px;background:url('https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/category.png') no-repeat;} 
.category .ico_coffee {background-position:-10px 0;}  
.category .ico_store {background-position:-10px -36px;}   
.category .ico_carpark {background-position:-10px -72px;} 
.category .ico_total {background-position:-10px -108px;} 
	
</style>
</head>
<body>
<div id="map" style="width:100%;height:100% !important;padding-bottom: 50%; position: relative;"></div>

 <div class="category">
        <ul>
            <li id="totalMenu" onclick="changeMarker('total')">
                전체 <br>가격(년)
            </li>
            <li id="coffeeMenu" onclick="changeMarker('coffee')">
                100미만
            </li>
            <li id="storeMenu" onclick="changeMarker('store')">
                100 ~ 150
            </li>
            <li id="carparkMenu" onclick="changeMarker('carpark')">
                151 ~ 200
            </li>
        </ul>
    </div>
</div>    

<script>
    // 초기 위치 설정
    var container = document.getElementById('map');
    var options = {
        center: new kakao.maps.LatLng(36.541594, 128.796425),
        level: 4
    };
    // 지도 생성    
    var map = new kakao.maps.Map(container, options); 

    let coffeeMarkers = [], // 커피숍 마커 객체를 가지고 있을 배열입니다
        storeMarkers = []

    let data = [
        [36.5433853076816, 128.79374954548905, '<div style="padding:5px;">큐브 885 원룸</div>'],
        [36.54258736144631, 128.79273730166875, '<div style="padding:5px;">미니미니 원룸</div>'],
        [36.54251799029123, 128.79255703824455, '<div style="padding:5px;">피터팬 원룸</div>'],
        [36.54270134906753, 36.54270134906753, '<div style="padding:5px;">밍키 원룸</div>'],
        [36.54270085952632, 128.79237980811527, '<div style="padding:5px;">세라 원룸</div>'],
        [36.5427025796902, 128.79226539270437, '<div style="padding:5px;">안나 원룸</div>'],
        [36.54272052362528, 128.7921206443862, '<div style="padding:5px;">웬디 원룸</div>'],
        [36.54248152821582, 36.54248152821582, '<div style="padding:5px;">엘리스 원룸</div>'],
    ];
    let data2 = [ // 100-150 원룸 정보
        [36.54260261917607, 128.79187226271233, '안나 원룸</div>'],
        [36.54272052362528, 128.7921206443862, '웬디 원룸'],
        [36.54248152821582, 36.54248152821582, '엘리스 원룸'],
    ];
    createCoffeeMarkers(); // 커피숍 마커를 생성하고 커피숍 마커 배열에 추가합니다
    createStoreMarkers();
    
    changeMarker('total'); // 지도에 커피숍 마커가 보이도록 설정합니다 

    // 카테고리 선택 [if문]
    function changeMarker(type){ 
        if (type === 'coffee') { // 커피숍 카테고리가 클릭됐을 때
            //  카테고리 스타일
            coffeeMenu.className = 'menu_selected';
            storeMenu.className = '';
            carparkMenu.className = '';
            totalMenu.className = '';
            //  마커 표시
            setCoffeeMarkers(map);
            setStoreMarkers(null);
            setCarparkMarkers(null);
            
        } else if (type === 'store') { // 편의점 카테고리가 클릭됐을 때
            coffeeMenu.className = '';
            storeMenu.className = 'menu_selected';
            carparkMenu.className = '';
            totalMenu.className = '';

            setCoffeeMarkers(null);
            setStoreMarkers(map);
            setCarparkMarkers(null);
            totalMenu.className = '';
        } else if (type === 'carpark') { // 주차장 카테고리가 클릭됐을 때
            coffeeMenu.className = '';
            storeMenu.className = '';
            carparkMenu.className = 'menu_selected';
            totalMenu.className = '';
        
            setCoffeeMarkers(null);
            setStoreMarkers(null);
            setCarparkMarkers(map);  
        } else if (type === 'total') {
            coffeeMenu.className = '';
            storeMenu.className = '';
            carparkMenu.className = '';
            totalMenu.className = 'menu_selected';
            
            setCoffeeMarkers(map);
            setStoreMarkers(map);
            setCarparkMarkers(map);  
        }
    } 
    // 마커를 만들어 배열에 전달하는 함수
    function createCoffeeMarkers() {
        for (let i = 0; i < data.length; i++) {
            // 마커를 생성합니다
            let marker = new kakao.maps.Marker({
                position: new kakao.maps.LatLng(data[i][0], data[i][1]),
                clickable: true
                });
            // 인포윈도우를 생성합니다
            let infowindow = new kakao.maps.InfoWindow({
                content : data[i][2],
                removable : true
                });
            //지도에 표현
            marker.setMap(map)
            // 마커에 클릭이벤트를 등록합니다
            kakao.maps.event.addListener(marker, 'click', function() {
                // 마커 위에 인포윈도우를 표시합니다
                infowindow.open(map, marker);
            });
            coffeeMarkers.push(marker) //배열에 마커 전달
        }
    }
    // 지도에 마커 표시하는 함수
    function setCoffeeMarkers(map) {        
        for (var i = 0; i < data.length; i++) {
            coffeeMarkers[i].setMap(map)
        }
    }
    function createStoreMarkers() {
        for (let i = 0; i < data2.length; i++) {
            // 마커를 생성합니다
            let marker = new kakao.maps.Marker({
                position: new kakao.maps.LatLng(data2[i][0], data2[i][1]),
                clickable: true
                });
            // 인포윈도우를 생성합니다
            let infowindow = new kakao.maps.InfoWindow({
                content : data2[i][2],
                removable : true
                });
            //지도에 표현
            marker.setMap(map)
            // 마커에 클릭이벤트를 등록합니다
            kakao.maps.event.addListener(marker, 'click', function() {
                // 마커 위에 인포윈도우를 표시합니다
                infowindow.open(map, marker);
            });
            storeMarkers.push(marker) //배열에 마커 전달
    }}
    function setStoreMarkers(map) {        
        for (var i = 0; i < data2.length; i++) {
            storeMarkers[i].setMap(map)    
        }   
    }        
</script>
</body>
</html>
